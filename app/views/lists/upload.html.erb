<div class="row">
  <div class="col-lg-12">
     <h1 class="page-header">
       Import Contacts Lists
       <div class="pull-right">
        <%= link_to 'New List', new_list_path, class: 'btn btn-default' %>
        </div>
     </h1>
  </div>
</div>
<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover" id="dataTable">
          <thead>
            <tr role="row">
            <% @temp_contacts[0].content.each_with_index do |c, i| %>
              <th>
                <span id="f_newcol-<%= i %>">
                  <div class="form-group">
                    <label>New Column Name</label>
                    <%= form_for [@list, ColumnList.new] , format: :json ,remote: true do |f| %>
                      <input id="newcol-<%= i %>" class="form-control" value="" maxlength="50" type="text" name="column_list[name]">
                      <input id="submit-newcol-<%= i %>" class="btn btn-default" vaname="submit-newcol-<%= i%>" type="submit" value="Save">
                    <% end %>
                  </div>
                </span>
                <div class="form-group">
                <select id="sel_col_<%= i %>" class="form-control" data-id="<%= i %>" >
                  <option selected="selected">Select option</option>
                  <option value="new">New column</option>
                  <optgroup label="Available Column Names">
                  <% @list.column_list.each do |col| %>
                  <option value="<%= col.id %>"><%= col.name %></option>
                  <% end %>
                  </optgroup>
                </select>
                </div>
              </th>
            <% end %>
            </tr>
          </thead>

          <tbody>
            <tr class="odd gradeX">
            <% @temp_contacts.each do |tmp| %>
              <% tmp.content.each do |col| %>
                <td><%= col %></td>
              <% end %>
            </tr>
            <% end %>
         </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  $('select[id^="sel_col"]').on('change', function (e) {
    var value = $(this).val();
    var id = $(this).data('id');
     if (value == 'new') {
      $("span[id=f_newcol-" + id + "]").show();
      $("#newcol-" + id ).focus()
     }
   });

  $("span[id*=f_newcol]").hide();
</script>
